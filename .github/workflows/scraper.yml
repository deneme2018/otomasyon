name: Matriks Haberleri G羹nl羹k ekim

# 襤 ak覺覺n覺n ne zaman 癟al覺aca覺n覺 belirler

on:
  # Bu, GitHub aray羹z羹nden manuel olarak tetikleme imkan覺 verir
  workflow_dispatch:

  schedule:
    # Cron zamanlamas覺 UTC (Eg羹d羹ml羹 Evrensel Zaman) kullan覺r.
    # T羹rkiye Saati (TRT/GMT+3) olduu i癟in 3 saat geri al覺n覺p UTC saatleri belirlenmitir:
    # 09:00 TRT -> 06:00 UTC
    # 15:00 TRT -> 12:00 UTC
    # 19:00 TRT -> 16:00 UTC
    - cron: "0 6,12,16 * * *" # Her g羹n 3 farkl覺 saatte 癟al覺覺r

jobs:
  run-scraper:
    # Botun deien CSV ve ID dosyalar覺n覺 depoya yazmas覺 i癟in bu yetki ZORUNLUDUR.
    permissions:
      contents: write
      
    runs-on: ubuntu-latest

    steps:
      - name: Depoyu 覺kar (Checkout)
        uses: actions/checkout@v4

      - name: Python 3.10 Kurulumu
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: Gerekli K羹t羹phaneleri Kur (requests, bs4, pandas)
        run: |
          python -m pip install --upgrade pip
          pip install requests beautifulsoup4 pandas
          # Eer bir requirements.txt dosyan覺z varsa, bunun yerine
          # pip install -r requirements.txt
          # komutunu da kullanabilirsiniz.

      # Python dosyan覺z覺n ad覺n覺n 'matriks_haber.py' olduunu varsay覺yoruz.
      - name: Haberleri ek ve Arivleri G羹ncelle
        run: python matriks_haber.py

      # --- COMMIT VE PUSH 襤LEM襤 (Deien dosyalar覺 kaydetme) ---
      - name: Deien Dosyalar覺 Kaydet ve GitHub'a Y羹kle
        run: |
          # Otomatik commit i癟in bot kimliini ayarla
          git config user.name github-actions[bot]
          git config user.email github-actions[bot]@users.noreply.github.com
          
          # Oluan/g羹ncellenen dosyalar覺 Git'e ekle
          git add matriks_haber_arsivi.csv kayitli_haber_idleri.txt
          
          # Eer 'git add' ileminden sonra bir deiiklik tespit edilirse commit yap
          if git diff --cached --exit-code; then
            echo "Yeni deiiklik yok, commit atlan覺yor."
          else
            # Deiiklik varsa commit ve push ilemini yap
            git commit -m " [Automated] Matriks haberleri g羹ncellendi (Tarih: $(date +%Y-%m-%d))"
            git push
          fi
```eof
